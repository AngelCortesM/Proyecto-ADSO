-- MySQL Script generated by MySQL Workbench
-- Mon Nov 13 13:04:12 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering
SET @OLD_UNIQUE_CHECKS = @@UNIQUE_CHECKS,
  UNIQUE_CHECKS = 0;
SET @OLD_FOREIGN_KEY_CHECKS = @@FOREIGN_KEY_CHECKS,
  FOREIGN_KEY_CHECKS = 0;
SET @OLD_SQL_MODE = @@SQL_MODE,
  SQL_MODE = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';
-- -----------------------------------------------------
-- Schema principal
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `principal`;
-- -----------------------------------------------------
-- Schema principal
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `principal` DEFAULT CHARACTER SET utf8;
USE `principal`;
-- -----------------------------------------------------
-- Table `principal`.`proveedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`proveedor` (
  `id_proveedor` INT NOT NULL,
  `tipo_identifica` VARCHAR(20) NOT NULL,
  `num_documento` INT NOT NULL,
  `razon_social` VARCHAR(50) NOT NULL,
  `nombre` VARCHAR(250) NOT NULL,
  `apellido` VARCHAR(80) NOT NULL,
  `direccion` VARCHAR(150) NOT NULL,
  `telefono` VARCHAR(15) NOT NULL,
  `email` VARCHAR(250) NOT NULL,
  `ciudad` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_proveedor`)
) ENGINE = InnoDB;
CREATE UNIQUE INDEX `num_documento_UNIQUE` ON `principal`.`proveedor` (`num_documento` ASC) VISIBLE;
-- -----------------------------------------------------
-- Table `principal`.`categoria_articulos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`categoria_articulos` (
  `id_cat` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_cat`)
) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `principal`.`articulo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`articulo` (
  `id_articulo` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `id_cat` INT NOT NULL,
  `costo` DECIMAL(10, 2) NOT NULL,
  `precio_venta` DECIMAL(10, 2) NOT NULL,
  `estado` VARCHAR(1) NOT NULL,
  `marca` VARCHAR(45) NOT NULL,
  `modelo` VARCHAR(45) NOT NULL,
  `ean` VARCHAR(13) NOT NULL,
  `id_proveedor` INT NOT NULL,
  PRIMARY KEY (`id_articulo`),
  CONSTRAINT `fk_articulo_proveedor1` FOREIGN KEY (`id_proveedor`) REFERENCES `principal`.`proveedor` (`id_proveedor`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_articulo_categoria_articulos1` FOREIGN KEY (`id_cat`) REFERENCES `principal`.`categoria_articulos` (`id_cat`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `principal`.`sedes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`sedes` (
  `id_sedes` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(15) NOT NULL,
  `direccion` VARCHAR(45) NOT NULL,
  `ciudad` VARCHAR(45) NOT NULL,
  `id_usuario` INT NOT NULL,
  PRIMARY KEY (`id_sedes`),
  CONSTRAINT `fk_sedes_usuarios1` FOREIGN KEY (`id_usuario`) REFERENCES `principal`.`usuarios` (`id_usuario`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB;
CREATE UNIQUE INDEX `idsedes_UNIQUE` ON `principal`.`sedes` (`id_sedes` ASC) VISIBLE;
CREATE INDEX `fk_sedes_usuarios1_idx` ON `principal`.`sedes` (`id_usuario` ASC) VISIBLE;
-- -----------------------------------------------------
-- Table `principal`.`usuarios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`usuarios` (
  `id_usuario` INT NOT NULL,
  `identidad` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `apellido` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(15) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `estado` VARCHAR(1) NOT NULL,
  `rol` VARCHAR(45) NOT NULL,
  `id_sede` INT NOT NULL,
  PRIMARY KEY (`id_usuario`),
  CONSTRAINT `fk_usuarios_sedes1` FOREIGN KEY (`id_sede`) REFERENCES `principal`.`sedes` (`id_sedes`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB;
CREATE UNIQUE INDEX `idusuarios_UNIQUE` ON `principal`.`usuarios` (`id_usuario` ASC) VISIBLE;
CREATE INDEX `fk_usuarios_sedes1_idx` ON `principal`.`usuarios` (`id_sede` ASC) VISIBLE;
-- -----------------------------------------------------
-- Table `principal`.`compras`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`compras` (
  `id_compras` INT NOT NULL,
  `numero` VARCHAR(45) NOT NULL,
  `fecha` DATE NOT NULL,
  `id_proveedor` INT NOT NULL,
  `id_articulo` INT NOT NULL,
  `id_sede` INT NOT NULL,
  `id_usuario` INT NOT NULL,
  PRIMARY KEY (`id_compras`),
  CONSTRAINT `fk_compras_proveedor1` FOREIGN KEY (`id_proveedor`) REFERENCES `principal`.`proveedor` (`id_proveedor`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_compras_usuarios1` FOREIGN KEY (`id_usuario`) REFERENCES `principal`.`usuarios` (`id_usuario`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_compras_sedes1` FOREIGN KEY (`id_sede`) REFERENCES `principal`.`sedes` (`id_sedes`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_compras_articulo1` FOREIGN KEY (`id_articulo`) REFERENCES `principal`.`articulo` (`id_articulo`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB;
CREATE UNIQUE INDEX `id_compras_UNIQUE` ON `principal`.`compras` (`id_compras` ASC) VISIBLE;
CREATE INDEX `fk_compras_proveedor1_idx` ON `principal`.`compras` (`id_proveedor` ASC) VISIBLE;
CREATE INDEX `fk_compras_usuarios1_idx` ON `principal`.`compras` (`id_usuario` ASC) VISIBLE;
CREATE INDEX `fk_compras_sedes1_idx` ON `principal`.`compras` (`id_sede` ASC) VISIBLE;
CREATE INDEX `fk_compras_articulo1_idx` ON `principal`.`compras` (`id_articulo` ASC) VISIBLE;
-- -----------------------------------------------------
-- Table `principal`.`inventario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `principal`.`inventario` (
  `id_inventario` INT NOT NULL,
  `fecha_inventario` DATE NOT NULL,
  `id_articulo` INT NOT NULL,
  `existencia` DECIMAL(12, 2) NOT NULL,
  `id_sede` INT NOT NULL,
  PRIMARY KEY (`id_inventario`),
  CONSTRAINT `fk_inventario_articulo1` FOREIGN KEY (`id_articulo`) REFERENCES `principal`.`articulo` (`id_articulo`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_inventario_sedes1` FOREIGN KEY (`id_sede`) REFERENCES `principal`.`sedes` (`id_sedes`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB;
CREATE UNIQUE INDEX `id_inventario_UNIQUE` ON `principal`.`inventario` (`id_inventario` ASC) VISIBLE;
CREATE INDEX `fk_inventario_articulo1_idx` ON `principal`.`inventario` (`id_articulo` ASC) VISIBLE;
CREATE INDEX `fk_inventario_sedes1_idx` ON `principal`.`inventario` (`id_sede` ASC) VISIBLE;
SET SQL_MODE = @OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS = @OLD_UNIQUE_CHECKS;
-- Deshabilitar las restricciones de clave foránea temporalmente
SET foreign_key_checks = 0;
-- Insertar datos de ejemplo en la tabla 'categoria_articulos'
INSERT INTO `categoria_articulos` (`id_cat`, `nombre`)
VALUES (1, 'Hardware'),
  (2, 'Software'),
  (3, 'Redes'),
  (4, 'Seguridad'),
  (5, 'Periféricos');
-- Insertar datos de ejemplo en la tabla 'sedes'
INSERT INTO `sedes` (
    `id_sedes`,
    `nombre`,
    `correo`,
    `telefono`,
    `direccion`,
    `ciudad`,
    `id_usuario`
  )
VALUES (
    1,
    'Sede Principal',
    'sedeprincipal@example.com',
    '1234567890',
    'Cra 15 #30-45',
    'Bogotá',
    1
  ),
  (
    2,
    'Sucursal Medellín',
    'sucursarmedellin@example.com',
    '9876543210',
    'Calle 8 #12-20',
    'Medellín',
    2
  ),
  (
    3,
    'Sucursal Cali',
    'sucursalcali@example.com',
    '5678901234',
    'Av. 20 #35-40',
    'Cali',
    3
  ),
  (
    4,
    'Sucursal Barranquilla',
    'sucursalbarranquilla@example.com',
    '3456789012',
    'Cra 10 #18-25',
    'Barranquilla',
    4
  ),
  (
    5,
    'Sucursal Cartagena',
    'sucursalcartagena@example.com',
    '9012345678',
    'Calle 5 #8-15',
    'Cartagena',
    5
  );
-- Insertar datos de ejemplo en la tabla 'proveedor'
INSERT INTO `proveedor` (
    `id_proveedor`,
    `tipo_identifica`,
    `num_documento`,
    `razon_social`,
    `nombre`,
    `apellido`,
    `direccion`,
    `telefono`,
    `email`,
    `ciudad`
  )
VALUES (
    1,
    'NIT',
    123456789,
    'ProveedorTech',
    'Juan',
    'Perez',
    'Cra 10 #20-30',
    '1234567890',
    'juan@proveedortech.com',
    'Bogotá'
  ),
  (
    2,
    'CC',
    987654321,
    'Suministros S.A.S',
    'Maria',
    'Gomez',
    'Calle 5 #15-25',
    '9876543210',
    'maria@suministros.com',
    'Medellín'
  ),
  (
    3,
    'NIT',
    567890123,
    'TechCorp Ltda.',
    'Carlos',
    'Rodriguez',
    'Av. 15 #25-35',
    '5678901234',
    'carlos@techcorp.com',
    'Cali'
  ),
  (
    4,
    'CC',
    345678901,
    'DataSolutions',
    'Laura',
    'Hernandez',
    'Cra 8 #12-22',
    '3456789012',
    'laura@datasolutions.com',
    'Barranquilla'
  ),
  (
    5,
    'NIT',
    901234567,
    'SoftTech S.A.S',
    'Pedro',
    'Garcia',
    'Calle 7 #10-20',
    '9012345678',
    'pedro@softtech.com',
    'Cartagena'
  );
-- Insertar datos de ejemplo en la tabla 'usuarios'
INSERT INTO `usuarios` (
    `id_usuario`,
    `identidad`,
    `nombre`,
    `apellido`,
    `correo`,
    `telefono`,
    `password`,
    `estado`,
    `rol`,
    `id_sede`
  )
VALUES (
    1,
    123456789,
    'Admin',
    'Principal',
    'admin@example.com',
    '1234567890',
    'clave123',
    'A',
    'Admin',
    1
  ),
  (
    2,
    987654321,
    'Usuario',
    'Sucursal',
    'usuario@example.com',
    '9876543210',
    'clave456',
    'A',
    'Usuario',
    2
  ),
  (
    3,
    567890123,
    'Supervisor',
    'Cali',
    'supervisorcali@example.com',
    '5678901234',
    'clave789',
    'A',
    'Supervisor',
    3
  ),
  (
    4,
    345678901,
    'Gerente',
    'Barranquilla',
    'gerentebarranquilla@example.com',
    '3456789012',
    'clave012',
    'A',
    'Gerente',
    4
  ),
  (
    5,
    901234567,
    'Encargado',
    'Cartagena',
    'encargadocartagena@example.com',
    '9012345678',
    'clave345',
    'A',
    'Encargado',
    5
  );
-- Insertar datos de ejemplo en la tabla 'articulo'
INSERT INTO `articulo` (
    `id_articulo`,
    `nombre`,
    `id_cat`,
    `costo`,
    `precio_venta`,
    `estado`,
    `marca`,
    `modelo`,
    `ean`,
    `id_proveedor`
  )
VALUES (
    1,
    'Laptop',
    2,
    800.00,
    1200.00,
    'A',
    'HP',
    'EliteBook',
    '1234567890123',
    1
  ),
  (
    2,
    'Monitor',
    1,
    200.00,
    300.00,
    'A',
    'Dell',
    'UltraSharp',
    '9876543210987',
    2
  ),
  (
    3,
    'Router',
    3,
    50.00,
    80.00,
    'A',
    'Linksys',
    'WRT1200AC',
    '5678901234567',
    3
  ),
  (
    4,
    'Firewall',
    4,
    300.00,
    500.00,
    'A',
    'Cisco',
    'ASA5506',
    '3456789012345',
    4
  ),
  (
    5,
    'Mouse',
    5,
    10.00,
    20.00,
    'A',
    'Logitech',
    'MX Master',
    '9012345678901',
    5
  );
-- Insertar datos de ejemplo en la tabla 'compras'
INSERT INTO `compras` (
    `id_compras`,
    `numero`,
    `fecha`,
    `id_proveedor`,
    `id_articulo`,
    `id_sede`,
    `id_usuario`
  )
VALUES (1, 'CP001', '2023-11-13', 1, 1, 1, 1),
  (2, 'CP002', '2023-11-13', 2, 2, 2, 2),
  (3, 'CP003', '2023-11-13', 3, 3, 3, 3),
  (4, 'CP004', '2023-11-13', 4, 4, 4, 4),
  (5, 'CP005', '2023-11-13', 5, 5, 5, 5);
-- Insertar datos de ejemplo en la tabla 'inventario'
INSERT INTO `inventario` (
    `id_inventario`,
    `fecha_inventario`,
    `id_articulo`,
    `existencia`,
    `id_sede`
  )
VALUES (1, '2023-11-13', 1, 50.0, 1),
  (2, '2023-11-13', 2, 30.0, 2),
  (3, '2023-11-13', 3, 100.0, 3),
  (4, '2023-11-13', 4, 20.0, 4),
  (5, '2023-11-13', 5, 40.0, 5);
-- Restaurar las restricciones de clave foránea
SET foreign_key_checks = 1;